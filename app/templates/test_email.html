<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test Email - Logo Base64</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            padding: 20px;
        }
        .email-container {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .logo-test {
            text-align: center;
            padding: 20px;
            background-color: #f9f9f9;
        }
        .logo-test img {
            border: 2px solid #4262be;
            border-radius: 5px;
        }
        .debug-info {
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div class="email-container">
        <h1>üß™ Test Email - Logo Base64</h1>
        
        <div class="test-section">
            <h2>üìß Contenu de l'email RDV</h2>
            <div id="email-content">
                <!-- Le contenu sera inject√© par JavaScript -->
            </div>
        </div>
        
        <div class="test-section">
            <h2>üñºÔ∏è Test du logo seul</h2>
            <div class="logo-test">
                <p>Logo encod√© en base64 :</p>
                <img id="logo-test" src="" alt="Logo LIA Coaching" style="max-width: 200px;">
                <p><small>Si vous voyez le logo ci-dessus, le base64 fonctionne !</small></p>
            </div>
        </div>
        
        <div class="test-section">
            <h2>üîç Debug - Informations base64</h2>
            <div class="debug-info">
                <p><strong>Base64 disponible :</strong> <span id="base64-status">Chargement...</span></p>
                <p><strong>Taille base64 :</strong> <span id="base64-size">Chargement...</span></p>
                <p><strong>D√©but base64 :</strong> <span id="base64-start">Chargement...</span></p>
            </div>
        </div>
    </div>

    <script>
        // Charger le logo base64 via une requ√™te AJAX
        fetch('/test-logo-base64')
            .then(response => response.json())
            .then(data => {
                console.log('Donn√©es re√ßues:', data);
                
                // Afficher le logo
                const logoImg = document.getElementById('logo-test');
                logoImg.src = data.logo_base64;
                
                // Mettre √† jour les infos de debug
                document.getElementById('base64-status').textContent = data.logo_base64 ? '‚úÖ Oui' : '‚ùå Non';
                document.getElementById('base64-size').textContent = data.logo_base64 ? data.logo_base64.length + ' caract√®res' : '0 caract√®res';
                document.getElementById('base64-start').textContent = data.logo_base64 ? data.logo_base64.substring(0, 50) + '...' : 'Aucun';
                
                // G√©n√©rer le contenu email complet
                generateEmailContent(data);
            })
            .catch(error => {
                console.error('Erreur:', error);
                document.getElementById('base64-status').textContent = '‚ùå Erreur de chargement';
            });
        
        function generateEmailContent(data) {
            const emailContent = `
                <div style="font-family: Arial, sans-serif; background-color: #f0f2f5; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
                    <div style="background-color: #4262be; color: white; padding: 20px; text-align: center; border-radius: 10px 10px 0 0;">
                        <img src="${data.logo_base64}" alt="LIA Coaching" style="height: 60px; margin-bottom: 10px;">
                        <h1>üé• Invitation Rendez-vous Vid√©o</h1>
                    </div>
                    
                    <div style="background-color: white; color: #333; padding: 30px; border-radius: 0 0 10px 10px;">
                        <p>Bonjour <strong>Jean Dupont</strong>,</p>
                        
                        <p>Vous √™tes invit√©(e) √† participer √† votre rendez-vous vid√©o de coaching via <strong>Visioconf√©rence</strong>.</p>
                        
                        <div style="background-color: #f8f9fa; border-left: 4px solid #4262be; padding: 15px; margin: 20px 0; border-radius: 5px;">
                            <h3>üìã D√©tails du rendez-vous</h3>
                            <p><strong>Programme :</strong> Acc√©l√©rateur Croissance D√©veloppement</p>
                            <p><strong>Type :</strong> Coaching individuel</p>
                            <p><strong>Date :</strong> 15/01/2024 √† 14:00</p>
                            <p><strong>Conseiller :</strong> Marie Martin</p>
                        </div>
                        
                        <p>Pour rejoindre votre rendez-vous vid√©o, cliquez simplement sur le bouton ci-dessous :</p>
                        
                        <div style="text-align: center;">
                            <a href="#" style="display: inline-block; background-color: #4262be; color: white; padding: 15px 30px; text-decoration: none; border-radius: 5px; font-weight: bold; margin: 20px 0;">üé¨ Rejoindre LIA Coaching</a>
                        </div>
                        
                        <div style="background-color: #f8f9fa; border-left: 4px solid #4262be; padding: 15px; margin: 20px 0; border-radius: 5px;">
                            <h3>üí° Instructions</h3>
                            <ul>
                                <li>Cliquez sur le bouton "Rejoindre LIA Coaching" ci-dessus</li>
                                <li>Autorisez l'acc√®s √† votre cam√©ra et microphone</li>
                                <li>Vous pouvez utiliser LIA Coaching depuis votre navigateur</li>
                                <li>Assurez-vous d'avoir une connexion internet stable</li>
                                <li>Testez votre √©quipement avant le rendez-vous</li>
                            </ul>
                        </div>
                        
                        <p><strong>Lien direct :</strong> <a href="#">https://example.com/video-rdv/123/invitation/candidat</a></p>
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px; color: #666; font-size: 12px;">
                        <p>Cet email a √©t√© envoy√© automatiquement par le syst√®me LIA Coaching.</p>
                        <p>Si vous avez des questions, n'h√©sitez pas √† contacter votre conseiller.</p>
                    </div>
                </div>
            `;
            
            document.getElementById('email-content').innerHTML = emailContent;
        }
    </script>
</body>
</html>
